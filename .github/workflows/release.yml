name: release-program
run-name: ${{ github.actor }} has executed the action
on:
  push:
    tags: 
      - '*/v[0-9].[0-9].[0-9]*'
jobs:
  release:
    runs-on: ubuntu-latest

    steps:
      - name: Get and check Tag
        run: |
          echo "Tag name from GITHUB_REF_NAME: $GITHUB_REF_NAME "
          if [[ $GITHUB_REF_NAME =~ .*"CLI".* ]]; then
            echo "plattform=CLI" >> $GITHUB_ENV
            echo ${$GITHUB_REF_NAME:4}
          elif [[ $GITHUB_REF_NAME =~ .*"BOTH".* ]]; then
            echo "plattform=BOTH" >> $GITHUB_ENV
            echo ${$GITHUB_REF_NAME:5}
          else
            echo "plattform=UI" >> $GITHUB_ENV
            echo ${$GITHUB_REF_NAME:3}
          fi

      - name: Build Console
        if: ${{ env.plattform == 'CLI' }}
        run: |
          echo "Plattform is CLI - Running MSBuild to build console..."
          cd LivinTimeConverterConsole
          ls
          msbuild LivingTimeConverterConsole.sln -property:Configuration=Release


